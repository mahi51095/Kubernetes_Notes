<!-- Static Pods in Kubernetes -->
# ğŸ“¦ Static Pods in Kubernetes

> A deep dive into one of the most foundational â€” yet less known â€” Kubernetes concepts.

---

## ğŸ“š Table of Contents
- [ğŸ“Œ What is a Static Pod?](#-what-is-a-static-pod)
- [âœ¨ Key Characteristics](#-key-characteristics)
- [ğŸ§° Use Cases](#-use-cases)
- [âš™ï¸ How Static Pods Work](#-how-static-pods-work)
- [ğŸ§ª Example: Deploying Nginx as a Static Pod](#-example-deploying-nginx-as-a-static-pod)
- [ğŸ“ Key Points to Remember](#-key-points-to-remember)
- [âœ… Advantages](#-advantages)
- [âš ï¸ Disadvantages](#-disadvantages)

---

## ğŸ“Œ What is a Static Pod?

A **Static Pod** in Kubernetes is a pod directly managed by the **Kubelet** on a node â€” not through the Kubernetes control plane (API server and scheduler).

- ğŸ—‚ï¸ Defined using plain YAML or JSON files
- ğŸ“‚ Stored in a specific folder on the node
- ğŸ” Automatically managed and restarted by Kubelet

---

## âœ¨ Key Characteristics

### ğŸ”¸ Not Managed by Kubernetes Scheduler
> Static pods skip the scheduler queue. They're created by the Kubelet directly on the node.

### ğŸ”¸ Node-Specific
> Tied to a particular node because the configuration file resides on that node.

### ğŸ”¸ Self-Healing
> The Kubelet will restart them if they crash, as long as the manifest file is present.

### ğŸ”¸ Invisible to the API Server
> Static pods wonâ€™t appear in `kubectl get pods` by default.

- Check via:  
  ```bash
  kubectl describe node <node-name>
  ```

---

## ğŸ§° Use Cases

| ğŸ·ï¸ Use Case | ğŸ” Description |
|-------------|----------------|
| **Node-specific agents** | Logging, monitoring tools like Fluentd or Prometheus Node Exporter |
| **Kubernetes Core Components** | Like `kube-apiserver`, `controller-manager`, and `scheduler` |
| **Single-node apps** | Daemons that must run only on one machine |

---

## âš™ï¸ How Static Pods Work

1. **Manifest File Created**  
   Create a YAML/JSON pod definition.

2. **Placed in Watch Directory**  
   Default: `/etc/kubernetes/manifests/`

3. **Kubelet Watches and Manages**  
   - Detects the file
   - Starts the pod
   - Restarts on failure
   - Deletes pod if the file is removed

---

## ğŸ§ª Example: Deploying Nginx as a Static Pod

### ğŸ”¹ Step 1: Create a YAML File
`nginx-static-pod.yaml`
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-static
  labels:
    app: nginx
spec:
  containers:
  - name: nginx
    image: nginx:latest
    ports:
    - containerPort: 80
```

### ğŸ”¹ Step 2: Move File to Watch Directory
```bash
sudo mv nginx-static-pod.yaml /etc/kubernetes/manifests/
```

### ğŸ”¹ Step 3: Verify Pod Status
```bash
kubectl get pods --all-namespaces
kubectl describe node <node-name>
```

### ğŸ”¹ Step 4: Observe Lifecycle Behavior
- Remove the file â†’ Pod is removed
- Pod crashes â†’ Kubelet restarts it

---

## ğŸ“ Key Points to Remember

- âŒ Not scheduled or controlled by API server  
- ğŸ§  Best for node-local workloads  
- ğŸ› ï¸ Ideal for essential infrastructure services  
- ğŸ“ Lives in a specific manifest directory

---

## âœ… Advantages

- ğŸ”„ **Self-Healing**  
  Automatically restarted by Kubelet if it fails

- ğŸ“ **Node-specific Deployment**  
  Useful for per-node agents or local system services

- ğŸ§¾ **Simple Configuration**  
  Just drop a YAML file in a folder â€” no complex resources

---

## âš ï¸ Disadvantages

- ğŸš« **No High-Level Scheduling**  
  Can't use features like Deployments, ReplicaSets, etc.

- ğŸ“‰ **Not Scalable**  
  Managing files across many nodes is tough

- â“ **Harder to Monitor**  
  Visibility and control are limited via `kubectl`

---

> ğŸ’¡ **Pro Tip**: Use **DaemonSets** if you want Kubernetes-native management of per-node pods with API server integration.

